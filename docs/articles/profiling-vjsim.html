<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profiling in `vjsim` • vjsim</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Profiling in `vjsim`">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vjsim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction-vjsim.html">Introduction to vjsim</a>
    </li>
    <li>
      <a href="../articles/simulation-vjsim.html">Simulation basic</a>
    </li>
    <li>
      <a href="../articles/profiling-vjsim.html">Profiling in vjsim</a>
    </li>
    <li>
      <a href="../articles/optimization-vjsim.html">Optimization with vjsim</a>
    </li>
    <li>
      <a href="../articles/exploring-vjsim.html">Exploring with vjsim</a>
    </li>
    <li>
      <a href="../articles/modeling-vjsim.html">Modeling with vjsim</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mladenjovanovic/vjsim">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="profiling-vjsim_files/header-attrs-2.1/header-attrs.js"></script><script src="profiling-vjsim_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="profiling-vjsim_files/jquery-1.12.4/jquery.min.js"></script><link href="profiling-vjsim_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="profiling-vjsim_files/datatables-binding-0.12/datatables.js"></script><link href="profiling-vjsim_files/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="profiling-vjsim_files/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="profiling-vjsim_files/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="profiling-vjsim_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet">
<script src="profiling-vjsim_files/crosstalk-1.0.0/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Profiling in <code>vjsim</code>
</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mladenjovanovic/vjsim/blob/master/vignettes/profiling-vjsim.Rmd"><code>vignettes/profiling-vjsim.Rmd</code></a></small>
      <div class="hidden name"><code>profiling-vjsim.Rmd</code></div>

    </div>

    
    
<div id="profiling" class="section level1">
<h1 class="hasAnchor">
<a href="#profiling" class="anchor"></a>Profiling</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Install vjsim if you haven't already by running the following commands</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># devtools::install_github("mladenjovanovic/vjsim")</span></span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># Install tidyverse and cowplot packages</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># install.packages(c("tidyverse", "cowplot", "DT), dependencies = TRUE)</span></span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(vjsim)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(cowplot)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(DT)</span></code></pre></div>
<p>Before reading this vignette, please read <a href="https://mladenjovanovic.github.io/vjsim/articles/introduction-vjsim.html">Introduction to vjsim</a> and <a href="https://mladenjovanovic.github.io/vjsim/articles/simulation-vjsim.html">Simulation in vjsim</a> vignettes by running:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span>(<span class="st">"introduction-vjsim"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span>(<span class="st">"simulation-vjsim"</span>)</span></code></pre></div>
<p>Once we know how <code>vjsim</code> works and how to simulate one jump, we might be interested in checking how jump kinetic parameters change when we add (or remove<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>) external weight in a form of a barbell or hex-barbell. For the purpose of this vignette, this external load is equal to:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># External load in kilograms</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>external_load &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">100</span>)</span></code></pre></div>
<p>To simulate vertical jump with this external loads, we will used <code><a href="../reference/vj_profile.html">vjsim::vj_profile</a></code> functions:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>profile_data &lt;-<span class="st"> </span>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/vj_profile.html">vj_profile</a></span>(</span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="dt">external_load =</span> external_load,</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="co"># Simulation parameters</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="dt">mass =</span> <span class="dv">75</span>,</span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="dt">push_off_distance =</span> <span class="fl">0.4</span>,</span>
<span id="cb4-7"><a href="#cb4-7"></a>  <span class="dt">max_force =</span> <span class="dv">3000</span>,</span>
<span id="cb4-8"><a href="#cb4-8"></a>  <span class="dt">max_velocity =</span> <span class="dv">4</span></span>
<span id="cb4-9"><a href="#cb4-9"></a></span>
<span id="cb4-10"><a href="#cb4-10"></a>  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>  <span class="co"># weight = mass * gravity_const,</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>  <span class="co"># gravity_const = 9.81,</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>  <span class="co"># decline_rate = 1.05,</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>  <span class="co"># peak_location = -push_off_distance * 0.15,</span></span>
<span id="cb4-15"><a href="#cb4-15"></a>  <span class="co"># time_to_max_activation = 0.3</span></span>
<span id="cb4-16"><a href="#cb4-16"></a>)</span></code></pre></div>
<p>Data frame returned from <code><a href="../reference/vj_profile.html">vjsim::vj_profile</a></code> is the same as data frame returned from <code><a href="../reference/vj_simulate.html">vjsim::vj_simulate</a></code> with additional two columns: ‘bodyweight’ and ‘external_load’:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(profile_data, <span class="dt">rownames =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html">formatRound</a></span>(<span class="dt">columns =</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span>(profile_data), <span class="dt">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<div id="htmlwidget-204124cf4ffa7cc6df74" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-204124cf4ffa7cc6df74">{"x":{"filter":"none","data":[[75,75,75,75,75,75],[0,20,40,60,80,100],[75,95,115,135,155,175],[735.75,931.95,1128.15,1324.35,1520.55,1716.75],[0.4,0.4,0.4,0.4,0.4,0.4],[9.81,9.81,9.81,9.81,9.81,9.81],[0.39830807160274,0.398603184969831,0.398823818971895,0.398607086541905,0.399103732436529,0.399326079106523],[0.34,0.367,0.398,0.435,0.482,0.544],[49.059180792942,48.9134142390974,47.590688246843,63.2952753158916,45.0246129393045,36.9777828205898],[-686.690819207058,-883.036585760903,-1080.55931175316,-1261.05472468411,-1475.5253870607,-1679.77221717941],[2.52271236821609,2.21615810679266,1.9389593309832,1.68519971607704,1.44128290309672,1.20536825481104],[0.324366854880247,0.250323993593417,0.191618923914721,0.144745060298988,0.105876473331238,0.0740526314834971],[1334.91665137574,1517.21739029203,1670.18103909806,1805.25745769221,1923.93001987846,2035.11101309422],[1292.23066945943,1505.61490502807,1688.40206799766,1847.34301533425,1984.03309124479,2104.50633197046],[1.17149432824335,1.08611222062624,1.00206989691431,0.916338129981391,0.828016042399437,0.734055292475225],[531.708077159858,604.767684062018,666.107980387536,719.588415668737,767.847651880179,812.672901405416],[189.203427616207,210.535020145303,222.980323063069,227.501961670401,223.398849979991,210.939444591932],[1563.84728576429,1647.86834894283,1673.63814167723,1654.22624291663,1593.04492091323,1493.88400993643],[12130.4734971423,14332.6294294266,16877.4302775972,19865.9030049521,23665.9598158127,28917.4269034815],[10961.3831142742,9418.35975341954,8151.01072694938,7337.78307382331,6387.69029895982,5314.33517921491],[1843.83197156564,2035.23337897857,2177.18850581003,2284.57884556949,2366.59598158128,2429.06385989244],[0.152,0.142,0.129,0.115,0.1,0.0840000000000001],[0.0332264611973322,0.0238447868563557,0.0159307393456029,0.0102524867091,0.00621614288512247,0.00344083952173764],[2.56799115378785,2.27218713479034,2.00781833476894,1.76753676766336,1.54509259180244,1.33533595090873],[0.329,0.354,0.382,0.416,0.458,0.514],[0.370214298342746,0.369297554649871,0.367046727869844,0.365525084945001,0.362804027818823,0.360483084255524],[2904.76652528266,2976.20168208058,2999.57194751737,2949.78879567697,2829.7468024392,2651.85325442824],[0.215931441040262,0.285357556989402,0.3391044170988,0.34090309635432,0.339748942914323,0.340544826718701],[0.265,0.316,0.368,0.402,0.443,0.499],[15828.5148524822,17119.1412653948,18060.708803089,18785.8593720339,19359.0493365807,19819.205335994],[0.0060306204339565,0.00371050015486848,0.00228166831108849,0.00129915224916949,0.000701409743703648,0.000348040230913208],[0.102,0.0920000000000001,0.0820000000000001,0.071,0.06,0.049],[29358.5214207803,25060.8436446978,20768.1596437317,16793.8615346859,13216.93077332,10032.7589975399],[0.0222337184877408,0.0155436783316617,0.0106934127054631,0.00683029024783723,0.00427220146419558,0.00232544052833159],[0.138,0.128,0.117,0.104,0.0910000000000001,0.0760000000000001],[0.0452787855717598,0.0560290279976807,0.0688590037857364,0.0823370515863169,0.103809688705726,0.129967696097688],[1.01794845347501,1.02528205358,1.03551338219705,1.04885892799578,1.07202589337783,1.10782405756825],[-1.35121803997274,-1.13004588616642,-0.936889434068897,-0.768861586095651,-0.613266860697279,-0.471312962335816],[0.464378873708762,0.490087876536082,0.51680810468891,0.543756399457819,0.574499316282998,0.608988406277797],[-1.3964968255445,-1.1860749141641,-1.00574843785463,-0.851198637681967,-0.717076549403005,-0.601280658433503],[0.456190951637574,0.478002979594573,0.49908394577422,0.518426630068221,0.53590059702086,0.549715816439812],[-1340.91923951837,-1328.33333313775,-1325.93380584015,-1295.56255276034,-1236.70188152597,-1157.96924449182],[0.538372799380877,0.553681680534113,0.557958992469719,0.560794808543908,0.562963767479143,0.563335851047503],[42.6859819163064,11.6024852639589,-18.2210288995984,-42.0855576420486,-60.1030713663345,-69.3953188762471],[1.03303278812765,1.00770614399818,0.989208122138107,0.977218330709181,0.969706618487585,0.967025369407527],[1.26135618410805,1.10807905339633,0.969479665491602,0.842599858038521,0.720641451548358,0.60268412740552]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>bodyweight<\/th>\n      <th>external_load<\/th>\n      <th>mass<\/th>\n      <th>weight<\/th>\n      <th>push_off_distance<\/th>\n      <th>gravity_const<\/th>\n      <th>take_off_distance<\/th>\n      <th>take_off_time<\/th>\n      <th>take_off_ground_reaction_force<\/th>\n      <th>take_off_propulsive_force<\/th>\n      <th>take_off_velocity<\/th>\n      <th>height<\/th>\n      <th>mean_GRF_over_distance<\/th>\n      <th>mean_GRF_over_time<\/th>\n      <th>mean_velocity<\/th>\n      <th>work_done<\/th>\n      <th>impulse<\/th>\n      <th>mean_power<\/th>\n      <th>mean_RFD<\/th>\n      <th>mean_RPD<\/th>\n      <th>peak_GRF<\/th>\n      <th>peak_GRF_time<\/th>\n      <th>peak_GRF_distance<\/th>\n      <th>peak_velocity<\/th>\n      <th>peak_velocity_time<\/th>\n      <th>peak_velocity_distance<\/th>\n      <th>peak_power<\/th>\n      <th>peak_power_distance<\/th>\n      <th>peak_power_time<\/th>\n      <th>peak_RFD<\/th>\n      <th>peak_RFD_distance<\/th>\n      <th>peak_RFD_time<\/th>\n      <th>peak_RPD<\/th>\n      <th>peak_RPD_distance<\/th>\n      <th>peak_RPD_time<\/th>\n      <th>diff_peak_to_take_off_velocity<\/th>\n      <th>ratio_peak_to_take_off_velocity<\/th>\n      <th>diff_mean_to_take_off_velocity<\/th>\n      <th>ratio_mean_to_take_off_velocity<\/th>\n      <th>diff_mean_to_peak_velocity<\/th>\n      <th>ratio_mean_to_peak_velocity<\/th>\n      <th>diff_mean_to_peak_power<\/th>\n      <th>ratio_mean_to_peak_power<\/th>\n      <th>diff_mean_GRF_over_distance_to_time<\/th>\n      <th>ratio_mean_GRF_over_distance_to_time<\/th>\n      <th>mean_velocity_as_TOV_half<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nDTWidget.formatRound(this, row, data, 0, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 1, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 2, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 3, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 4, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 5, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 6, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 7, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 8, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 9, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 10, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 11, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 12, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 13, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 14, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 15, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 16, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 17, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 18, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 19, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 20, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 21, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 22, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 23, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 24, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 25, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 26, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 27, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 28, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 29, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 30, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 31, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 32, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 33, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 34, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 35, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 36, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 37, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 38, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 39, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 40, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 41, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 42, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 43, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 44, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 45, 2, 3, \",\", \".\");\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script><p>Now that we have performed multiple jumps, we can plot various profiles. To save time (and code space), let’s create a function for plotting:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>plot_profile &lt;-<span class="st"> </span><span class="cf">function</span>(profile_data, x_var, y_var) {</span>
<span id="cb6-2"><a href="#cb6-2"></a>  df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(</span>
<span id="cb6-3"><a href="#cb6-3"></a>    <span class="dt">x_var =</span> profile_data[[x_var]],</span>
<span id="cb6-4"><a href="#cb6-4"></a>    <span class="dt">y_var =</span> profile_data[[y_var]]</span>
<span id="cb6-5"><a href="#cb6-5"></a>  )</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a>  gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> x_var, <span class="dt">y =</span> y_var)) <span class="op">+</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="dv">8</span>) <span class="op">+</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">color =</span> <span class="st">"blue"</span>) <span class="op">+</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">"blue"</span>) <span class="op">+</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> x_var, <span class="dt">y =</span> y_var)</span>
<span id="cb6-12"><a href="#cb6-12"></a></span>
<span id="cb6-13"><a href="#cb6-13"></a>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(gg)</span>
<span id="cb6-14"><a href="#cb6-14"></a>}</span></code></pre></div>
<div id="loadheight-and-loadtov-profile" class="section level2">
<h2 class="hasAnchor">
<a href="#loadheight-and-loadtov-profile" class="anchor"></a>Load~Height and Load~TOV Profile</h2>
<p>The first profile we want to plot is the load~height profile, to see how adding external resistance affects the jump height of this individual athlete:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"external_load"</span>, <span class="st">"height"</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-7-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>Rather than using external load on x-axis, we can use total system load, which is equal to bodyweigth plus external load:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mass"</span>, <span class="st">"height"</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-8-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>As can be seen from both profile, the higher the external load, the lower the jump height. It seems that this profile, or relationship, is curvilinear, although not much. Rather than using height, we can use take-off velocity (TOV):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mass"</span>, <span class="st">"take_off_velocity"</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-9-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>With this profile, the relationship is more linear. What we want to <em>extract</em> from this profile are the <span class="math inline">\(Mass_0\)</span> and <span class="math inline">\(TOV_0\)</span>, or the points where this profile line, when extened (or extrapolated), cuts the x- and y-axes. It is easier to explain in picture:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>lm_model &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(take_off_velocity<span class="op">~</span>mass, profile_data)</span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a>model_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="dt">mass =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="op">-</span><span class="dv">50</span>, <span class="dv">300</span>),</span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="dt">predicted_tov =</span> <span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(lm_model, <span class="dt">newdata =</span> <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">mass =</span> mass))</span>
<span id="cb10-6"><a href="#cb10-6"></a>)</span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mass"</span>, <span class="st">"take_off_velocity"</span>) <span class="op">+</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> model_data, <span class="kw">aes</span>(<span class="dt">y =</span> predicted_tov, <span class="dt">x =</span> mass), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>) <span class="op">+</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-10-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>We can do that by using <code><a href="../reference/get_FV_profile.html">vjsim::get_FV_profile</a></code> function. <code><a href="../reference/get_FV_profile.html">vjsim::get_FV_profile</a></code> utilizes simple linear regression to model the relationship between two variables (mass and TOV in this case) and spits out few summaries:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_FV_profile.html">get_FV_profile</a></span>(</span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="dt">profile_data =</span> profile_data,</span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="dt">force =</span> <span class="st">"mass"</span>,</span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="dt">velocity =</span> <span class="st">"take_off_velocity"</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>)</span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co">#&gt; $F0</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co">#&gt; [1] 265.1471</span></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="co">#&gt; </span></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="co">#&gt; $F0_rel</span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co">#&gt; [1] 3.535294</span></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="co">#&gt; </span></span>
<span id="cb11-12"><a href="#cb11-12"></a><span class="co">#&gt; $V0</span></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="co">#&gt; [1] 3.471573</span></span>
<span id="cb11-14"><a href="#cb11-14"></a><span class="co">#&gt; </span></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="co">#&gt; $Pmax</span></span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="co">#&gt; [1] 230.1193</span></span>
<span id="cb11-17"><a href="#cb11-17"></a><span class="co">#&gt; </span></span>
<span id="cb11-18"><a href="#cb11-18"></a><span class="co">#&gt; $Pmax_rel</span></span>
<span id="cb11-19"><a href="#cb11-19"></a><span class="co">#&gt; [1] 3.068258</span></span>
<span id="cb11-20"><a href="#cb11-20"></a><span class="co">#&gt; </span></span>
<span id="cb11-21"><a href="#cb11-21"></a><span class="co">#&gt; $Sfv</span></span>
<span id="cb11-22"><a href="#cb11-22"></a><span class="co">#&gt; [1] -76.37664</span></span></code></pre></div>
<p><code><a href="../reference/get_FV_profile.html">vjsim::get_FV_profile</a></code> assumes force and velocity variables, and thus can be used to calculate max power (‘Pmax’), but nonetheless it can be used in this scenario (but we need to disregard the Pmax; we will use it in another profile). Here, F0 represents <span class="math inline">\(Mass_0\)</span>, and we can see that, according to this profile and linear regression used, it is equal to 260kg. This means that when total load (i.e. total system mass) is equal to 260kg, TOV will be equal to zero. F0_rel is F0 divided by bodyweight (which is saved in the <code>profile_data</code> object). V0 is the hypothetical take-off velocity when total system load is equal to zero. ‘Sfv’ represents the slope of this regression line. Sfv is equal to -74, which means that for every increase in TOV for 1m/s, total system load needs to be decreased by 74kg.</p>
<p>We can apply this profiling to external load rather than total load:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_FV_profile.html">get_FV_profile</a></span>(</span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="dt">profile_data =</span> profile_data,</span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="dt">force =</span> <span class="st">"external_load"</span>,</span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="dt">velocity =</span> <span class="st">"take_off_velocity"</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>)</span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="co">#&gt; $F0</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co">#&gt; [1] 190.1471</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co">#&gt; </span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co">#&gt; $F0_rel</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co">#&gt; [1] 2.535294</span></span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="co">#&gt; </span></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="co">#&gt; $V0</span></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="co">#&gt; [1] 2.489597</span></span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="co">#&gt; </span></span>
<span id="cb12-15"><a href="#cb12-15"></a><span class="co">#&gt; $Pmax</span></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="co">#&gt; [1] 118.3474</span></span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="co">#&gt; </span></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="co">#&gt; $Pmax_rel</span></span>
<span id="cb12-19"><a href="#cb12-19"></a><span class="co">#&gt; [1] 1.577965</span></span>
<span id="cb12-20"><a href="#cb12-20"></a><span class="co">#&gt; </span></span>
<span id="cb12-21"><a href="#cb12-21"></a><span class="co">#&gt; $Sfv</span></span>
<span id="cb12-22"><a href="#cb12-22"></a><span class="co">#&gt; [1] -76.37664</span></span></code></pre></div>
<p>We can see that now the F0 (or <span class="math inline">\(Mass_0\)</span>) is equal to 185kg. Now V0 is equal to predicted take-off velocity of the bodyweight jump (since that implies zero external load). It is not exactly equal to TOV from the profile table, since this is modeled value.</p>
<p>For Load~Height profile (acually mass~height model), since it is curvilinear, we can use 2nd degree polynomial regression. Before using <code><a href="../reference/get_FV_profile.html">vjsim::get_FV_profile</a></code>, let’s plot the polynomial model and see how it extendes beyond profile data (this is needed to be checked since we will calculate <span class="math inline">\(Mass_0\)</span> and <span class="math inline">\(Height_0\)</span>):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>lm_model &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(height<span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(mass, <span class="dv">2</span>), profile_data)</span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a>model_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="dt">mass =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">250</span>),</span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="dt">predicted_height =</span> <span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(lm_model, <span class="dt">newdata =</span> <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">mass =</span> mass))</span>
<span id="cb13-6"><a href="#cb13-6"></a>)</span>
<span id="cb13-7"><a href="#cb13-7"></a></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mass"</span>, <span class="st">"height"</span>) <span class="op">+</span></span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> model_data, <span class="kw">aes</span>(<span class="dt">y =</span> predicted_height, <span class="dt">x =</span> mass), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>) <span class="op">+</span></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-13-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>The usual problem with polynomial regressions is exactly this extrapolation beyond the data (which is needed to get <span class="math inline">\(Mass_0\)</span> and <span class="math inline">\(Height_0\)</span>). As can be seen from the figure, the 2nd degree polynomial fit never cuts through the x-axis (where Height is equal to 0), and thus <span class="math inline">\(Mass_0\)</span> cannot be computed. Let’s see whar happens when using 3rd degree polynomial:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>lm_model &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(height<span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(mass, <span class="dv">3</span>), profile_data)</span>
<span id="cb14-2"><a href="#cb14-2"></a></span>
<span id="cb14-3"><a href="#cb14-3"></a>model_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="dt">mass =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">250</span>),</span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="dt">predicted_height =</span> <span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(lm_model, <span class="dt">newdata =</span> <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">mass =</span> mass))</span>
<span id="cb14-6"><a href="#cb14-6"></a>)</span>
<span id="cb14-7"><a href="#cb14-7"></a></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mass"</span>, <span class="st">"height"</span>) <span class="op">+</span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> model_data, <span class="kw">aes</span>(<span class="dt">y =</span> predicted_height, <span class="dt">x =</span> mass), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>) <span class="op">+</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-14-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>With this 3rd degree polynomial model, <span class="math inline">\(Mass_0\)</span> and <span class="math inline">\(Height_0\)</span> can be computed. We can do that with <code><a href="../reference/get_FV_profile.html">vjsim::get_FV_profile</a></code>, but we will use ‘poly_deg = 3’ argument to fit 3rd degree polynomial regression model:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_FV_profile.html">get_FV_profile</a></span>(</span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="dt">profile_data =</span> profile_data,</span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="dt">force =</span> <span class="st">"mass"</span>,</span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="dt">velocity =</span> <span class="st">"height"</span>, </span>
<span id="cb15-5"><a href="#cb15-5"></a>  <span class="dt">poly_deg =</span> <span class="dv">3</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>)</span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co">#&gt; $F0</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">#&gt; [1] 225.0424</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">#&gt; </span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">#&gt; $F0_rel</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">#&gt; [1] 3.000566</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">#&gt; </span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">#&gt; $V0</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">#&gt; [1] 0.7827555</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co">#&gt; </span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">#&gt; $Pmax</span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co">#&gt; [1] 44.0383</span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co">#&gt; </span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co">#&gt; $Pmax_rel</span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co">#&gt; [1] 0.5871773</span></span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="co">#&gt; </span></span>
<span id="cb15-22"><a href="#cb15-22"></a><span class="co">#&gt; $Sfv</span></span>
<span id="cb15-23"><a href="#cb15-23"></a><span class="co">#&gt; [1] -287.5003</span></span></code></pre></div>
<p>According to this model, when mass is equal to 215kg, jump height is equal to 0m. In practice, we never tend to use load this high, but load that allows for at least 10-15cm (0.1-0.15m) jump height.</p>
<p>To make this simpler, we can use simple linear regression instead to see how this differs:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>lm_model &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(height<span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(mass, <span class="dv">1</span>), profile_data)</span>
<span id="cb16-2"><a href="#cb16-2"></a></span>
<span id="cb16-3"><a href="#cb16-3"></a>model_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="dt">mass =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">250</span>),</span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="dt">predicted_height =</span> <span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(lm_model, <span class="dt">newdata =</span> <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">mass =</span> mass))</span>
<span id="cb16-6"><a href="#cb16-6"></a>)</span>
<span id="cb16-7"><a href="#cb16-7"></a></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mass"</span>, <span class="st">"height"</span>) <span class="op">+</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> model_data, <span class="kw">aes</span>(<span class="dt">y =</span> predicted_height, <span class="dt">x =</span> mass), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>) <span class="op">+</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-16-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>And finally calculate <span class="math inline">\(Mass_0\)</span> and <span class="math inline">\(Height_0\)</span>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_FV_profile.html">get_FV_profile</a></span>(</span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="dt">profile_data =</span> profile_data,</span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="dt">force =</span> <span class="st">"mass"</span>,</span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="dt">velocity =</span> <span class="st">"height"</span></span>
<span id="cb17-5"><a href="#cb17-5"></a>)</span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">#&gt; $F0</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#&gt; [1] 198.4972</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co">#&gt; </span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co">#&gt; $F0_rel</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co">#&gt; [1] 2.646629</span></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="co">#&gt; </span></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="co">#&gt; $V0</span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="co">#&gt; [1] 0.4910784</span></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="co">#&gt; </span></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="co">#&gt; $Pmax</span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="co">#&gt; [1] 24.36942</span></span>
<span id="cb17-17"><a href="#cb17-17"></a><span class="co">#&gt; </span></span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="co">#&gt; $Pmax_rel</span></span>
<span id="cb17-19"><a href="#cb17-19"></a><span class="co">#&gt; [1] 0.3249256</span></span>
<span id="cb17-20"><a href="#cb17-20"></a><span class="co">#&gt; </span></span>
<span id="cb17-21"><a href="#cb17-21"></a><span class="co">#&gt; $Sfv</span></span>
<span id="cb17-22"><a href="#cb17-22"></a><span class="co">#&gt; [1] -404.2066</span></span></code></pre></div>
<p>From these few examples, we can see how profiling depends on the variables used, as well as the models used (i.e. polynomial or linear regression) and thus how can the (extrapolated) parameters differ.</p>
<p>From a simulation perspective, we would be interested to see if <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> can be used to infer <em>underlying</em> (or latent or hidden) Force Generator <code>max_force</code> and <code>max_velocity</code> characteristics. I will explore this in <a href="https://mladenjovanovic.github.io/vjsim/articles/exploring-vjsim.html">Exploring</a> vignette. For now let’s explore other profiles.</p>
</div>
<div id="mean-forcemean-velocity-profile" class="section level2">
<h2 class="hasAnchor">
<a href="#mean-forcemean-velocity-profile" class="anchor"></a>Mean Force~Mean Velocity Profile</h2>
<p>Instead of using mass or external load, we can use mean ground reaction force (GRF) over distance<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> with mean velocity. Why mean GRF over distance and not over time? Because using mean GRF over distance give correct results for work and thus power calculus, while mean GRF over time does not (but can be used to calculate impulse).</p>
<p>Let’s plot the relationship:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-18-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>As can be seen from the above figure, from the data simulated using <code>vjsim</code>, it seems that this relationship is not linear, but curvilinear. We do tend to model it with simple linear regression.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>lm_model &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(mean_velocity<span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(mean_GRF_over_distance, <span class="dv">1</span>), profile_data)</span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a>model_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="dt">mean_GRF_over_distance =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="op">-</span><span class="dv">50</span>, <span class="dv">3500</span>),</span>
<span id="cb19-5"><a href="#cb19-5"></a>  <span class="dt">predicted_mv =</span> <span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(lm_model, <span class="dt">newdata =</span> <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">mean_GRF_over_distance =</span> mean_GRF_over_distance))</span>
<span id="cb19-6"><a href="#cb19-6"></a>)</span>
<span id="cb19-7"><a href="#cb19-7"></a></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>) <span class="op">+</span></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> model_data, <span class="kw">aes</span>(<span class="dt">y =</span> predicted_mv, <span class="dt">x =</span> mean_GRF_over_distance), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>) <span class="op">+</span></span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb19-11"><a href="#cb19-11"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-19-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>The extracted <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> are the following:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_FV_profile.html">get_FV_profile</a></span>(</span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="dt">profile_data =</span> profile_data,</span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="dt">force =</span> <span class="st">"mean_GRF_over_distance"</span>,</span>
<span id="cb20-4"><a href="#cb20-4"></a>  <span class="dt">velocity =</span> <span class="st">"mean_velocity"</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>)</span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="co">#&gt; $F0</span></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="co">#&gt; [1] 3254.314</span></span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="co">#&gt; </span></span>
<span id="cb20-9"><a href="#cb20-9"></a><span class="co">#&gt; $F0_rel</span></span>
<span id="cb20-10"><a href="#cb20-10"></a><span class="co">#&gt; [1] 43.39085</span></span>
<span id="cb20-11"><a href="#cb20-11"></a><span class="co">#&gt; </span></span>
<span id="cb20-12"><a href="#cb20-12"></a><span class="co">#&gt; $V0</span></span>
<span id="cb20-13"><a href="#cb20-13"></a><span class="co">#&gt; [1] 2.021105</span></span>
<span id="cb20-14"><a href="#cb20-14"></a><span class="co">#&gt; </span></span>
<span id="cb20-15"><a href="#cb20-15"></a><span class="co">#&gt; $Pmax</span></span>
<span id="cb20-16"><a href="#cb20-16"></a><span class="co">#&gt; [1] 1644.327</span></span>
<span id="cb20-17"><a href="#cb20-17"></a><span class="co">#&gt; </span></span>
<span id="cb20-18"><a href="#cb20-18"></a><span class="co">#&gt; $Pmax_rel</span></span>
<span id="cb20-19"><a href="#cb20-19"></a><span class="co">#&gt; [1] 21.92436</span></span>
<span id="cb20-20"><a href="#cb20-20"></a><span class="co">#&gt; </span></span>
<span id="cb20-21"><a href="#cb20-21"></a><span class="co">#&gt; $Sfv</span></span>
<span id="cb20-22"><a href="#cb20-22"></a><span class="co">#&gt; [1] -1610.166</span></span></code></pre></div>
<p>If you remember from simulation parameters, Force Generator max force was set to 3000N and max velocity to 4m/s. From this simple example, we can see that <em>manifested</em> F-V relationship doesn’t uncover <em>latent</em> force generator characteristic. This will be further explored in another vignette.</p>
<p>From <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> we can calculate <span class="math inline">\(P_{max}\)</span>, which is equal to <span class="math inline">\(\frac{F_0 \times V_0}{4}\)</span> (assuming linear relationship). Let’s see what happens when we use 2nd degree polynomial fit:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>lm_model &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(mean_velocity<span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(mean_GRF_over_distance, <span class="dv">2</span>), profile_data)</span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a>model_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb21-4"><a href="#cb21-4"></a>  <span class="dt">mean_GRF_over_distance =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="op">-</span><span class="dv">50</span>, <span class="dv">3500</span>),</span>
<span id="cb21-5"><a href="#cb21-5"></a>  <span class="dt">predicted_mv =</span> <span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(lm_model, <span class="dt">newdata =</span> <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">mean_GRF_over_distance =</span> mean_GRF_over_distance))</span>
<span id="cb21-6"><a href="#cb21-6"></a>)</span>
<span id="cb21-7"><a href="#cb21-7"></a></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>) <span class="op">+</span></span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> model_data, <span class="kw">aes</span>(<span class="dt">y =</span> predicted_mv, <span class="dt">x =</span> mean_GRF_over_distance), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>) <span class="op">+</span></span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-21-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>The extracted <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> are now equal to:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_FV_profile.html">get_FV_profile</a></span>(</span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="dt">profile_data =</span> profile_data,</span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="dt">force =</span> <span class="st">"mean_GRF_over_distance"</span>,</span>
<span id="cb22-4"><a href="#cb22-4"></a>  <span class="dt">velocity =</span> <span class="st">"mean_velocity"</span>,</span>
<span id="cb22-5"><a href="#cb22-5"></a>  <span class="dt">poly_deg =</span> <span class="dv">2</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>)</span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="co">#&gt; $F0</span></span>
<span id="cb22-8"><a href="#cb22-8"></a><span class="co">#&gt; [1] 2716.435</span></span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="co">#&gt; </span></span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="co">#&gt; $F0_rel</span></span>
<span id="cb22-11"><a href="#cb22-11"></a><span class="co">#&gt; [1] 36.21914</span></span>
<span id="cb22-12"><a href="#cb22-12"></a><span class="co">#&gt; </span></span>
<span id="cb22-13"><a href="#cb22-13"></a><span class="co">#&gt; $V0</span></span>
<span id="cb22-14"><a href="#cb22-14"></a><span class="co">#&gt; [1] 1.095512</span></span>
<span id="cb22-15"><a href="#cb22-15"></a><span class="co">#&gt; </span></span>
<span id="cb22-16"><a href="#cb22-16"></a><span class="co">#&gt; $Pmax</span></span>
<span id="cb22-17"><a href="#cb22-17"></a><span class="co">#&gt; [1] 743.9716</span></span>
<span id="cb22-18"><a href="#cb22-18"></a><span class="co">#&gt; </span></span>
<span id="cb22-19"><a href="#cb22-19"></a><span class="co">#&gt; $Pmax_rel</span></span>
<span id="cb22-20"><a href="#cb22-20"></a><span class="co">#&gt; [1] 9.919622</span></span>
<span id="cb22-21"><a href="#cb22-21"></a><span class="co">#&gt; </span></span>
<span id="cb22-22"><a href="#cb22-22"></a><span class="co">#&gt; $Sfv</span></span>
<span id="cb22-23"><a href="#cb22-23"></a><span class="co">#&gt; [1] -2479.604</span></span></code></pre></div>
<p>And if we use 3rd degree polynomial fit:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>lm_model &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(mean_velocity<span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(mean_GRF_over_distance, <span class="dv">3</span>), profile_data)</span>
<span id="cb23-2"><a href="#cb23-2"></a></span>
<span id="cb23-3"><a href="#cb23-3"></a>model_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb23-4"><a href="#cb23-4"></a>  <span class="dt">mean_GRF_over_distance =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="op">-</span><span class="dv">50</span>, <span class="dv">3500</span>),</span>
<span id="cb23-5"><a href="#cb23-5"></a>  <span class="dt">predicted_mv =</span> <span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(lm_model, <span class="dt">newdata =</span> <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">mean_GRF_over_distance =</span> mean_GRF_over_distance))</span>
<span id="cb23-6"><a href="#cb23-6"></a>)</span>
<span id="cb23-7"><a href="#cb23-7"></a></span>
<span id="cb23-8"><a href="#cb23-8"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_velocity"</span>) <span class="op">+</span></span>
<span id="cb23-9"><a href="#cb23-9"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> model_data, <span class="kw">aes</span>(<span class="dt">y =</span> predicted_mv, <span class="dt">x =</span> mean_GRF_over_distance), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>) <span class="op">+</span></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-23-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>The extracted <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> are now equal to:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_FV_profile.html">get_FV_profile</a></span>(</span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="dt">profile_data =</span> profile_data,</span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="dt">force =</span> <span class="st">"mean_GRF_over_distance"</span>,</span>
<span id="cb24-4"><a href="#cb24-4"></a>  <span class="dt">velocity =</span> <span class="st">"mean_velocity"</span>,</span>
<span id="cb24-5"><a href="#cb24-5"></a>  <span class="dt">poly_deg =</span> <span class="dv">3</span></span>
<span id="cb24-6"><a href="#cb24-6"></a>)</span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="co">#&gt; $F0</span></span>
<span id="cb24-8"><a href="#cb24-8"></a><span class="co">#&gt; [1] 2611.936</span></span>
<span id="cb24-9"><a href="#cb24-9"></a><span class="co">#&gt; </span></span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="co">#&gt; $F0_rel</span></span>
<span id="cb24-11"><a href="#cb24-11"></a><span class="co">#&gt; [1] 34.82582</span></span>
<span id="cb24-12"><a href="#cb24-12"></a><span class="co">#&gt; </span></span>
<span id="cb24-13"><a href="#cb24-13"></a><span class="co">#&gt; $V0</span></span>
<span id="cb24-14"><a href="#cb24-14"></a><span class="co">#&gt; [1] 1.966336</span></span>
<span id="cb24-15"><a href="#cb24-15"></a><span class="co">#&gt; </span></span>
<span id="cb24-16"><a href="#cb24-16"></a><span class="co">#&gt; $Pmax</span></span>
<span id="cb24-17"><a href="#cb24-17"></a><span class="co">#&gt; [1] 1283.986</span></span>
<span id="cb24-18"><a href="#cb24-18"></a><span class="co">#&gt; </span></span>
<span id="cb24-19"><a href="#cb24-19"></a><span class="co">#&gt; $Pmax_rel</span></span>
<span id="cb24-20"><a href="#cb24-20"></a><span class="co">#&gt; [1] 17.11982</span></span>
<span id="cb24-21"><a href="#cb24-21"></a><span class="co">#&gt; </span></span>
<span id="cb24-22"><a href="#cb24-22"></a><span class="co">#&gt; $Sfv</span></span>
<span id="cb24-23"><a href="#cb24-23"></a><span class="co">#&gt; [1] -1328.326</span></span></code></pre></div>
<p>As can be seen from the examples above, each model fit provides different estimates for <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> (using <code>vjsim</code> data), but we do tend to represent it with simple linear regression. As can be seen from estimated <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span>, they do not seem to recover Force Generator max force and max velocity.</p>
</div>
<div id="mean-forcemean-power-profile" class="section level2">
<h2 class="hasAnchor">
<a href="#mean-forcemean-power-profile" class="anchor"></a>Mean Force~Mean Power Profile</h2>
<p>As seen from the Mean Force~Mean Velocity Profile, <span class="math inline">\(P_{max}\)</span> can be calculated using <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span>. But rather than estimating it, we can actually plot it, since we have that data available from <code>vjsim</code> and in our profilind data frame:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_power"</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-25-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>Also, rather than using mean GRF over distance for power profile, we can also use mass and external load:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"external_load"</span>, <span class="st">"mean_power"</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-26-1.png" width="90%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mass"</span>, <span class="st">"mean_power"</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-27-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>This is a typical power profile. We can fit 2nd degree polynomial fit to these data points (using mean GRF over distance):</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>lm_model &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(mean_power<span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/stats/poly.html">poly</a></span>(mean_GRF_over_distance, <span class="dv">2</span>), profile_data)</span>
<span id="cb28-2"><a href="#cb28-2"></a></span>
<span id="cb28-3"><a href="#cb28-3"></a>model_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb28-4"><a href="#cb28-4"></a>  <span class="dt">mean_GRF_over_distance =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="op">-</span><span class="dv">50</span>, <span class="dv">3500</span>),</span>
<span id="cb28-5"><a href="#cb28-5"></a>  <span class="dt">predicted_mp =</span> <span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(lm_model, <span class="dt">newdata =</span> <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">mean_GRF_over_distance =</span> mean_GRF_over_distance))</span>
<span id="cb28-6"><a href="#cb28-6"></a>)</span>
<span id="cb28-7"><a href="#cb28-7"></a></span>
<span id="cb28-8"><a href="#cb28-8"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"mean_GRF_over_distance"</span>, <span class="st">"mean_power"</span>) <span class="op">+</span></span>
<span id="cb28-9"><a href="#cb28-9"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> model_data, <span class="kw">aes</span>(<span class="dt">y =</span> predicted_mp, <span class="dt">x =</span> mean_GRF_over_distance), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>) <span class="op">+</span></span>
<span id="cb28-10"><a href="#cb28-10"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb28-11"><a href="#cb28-11"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-28-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>From this curve we can extract (or predict) mean <span class="math inline">\(P_{max}\)</span>. For that reason there is <code><a href="../reference/get_power_profile.html">vjsim::get_power_profile</a></code> function:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_power_profile.html">get_power_profile</a></span>(</span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="dt">profile_data =</span> profile_data,</span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="dt">x_var =</span> <span class="st">"mean_GRF_over_distance"</span>,</span>
<span id="cb29-4"><a href="#cb29-4"></a>  <span class="dt">power =</span> <span class="st">"mean_power"</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>)</span>
<span id="cb29-6"><a href="#cb29-6"></a><span class="co">#&gt; $Pmax</span></span>
<span id="cb29-7"><a href="#cb29-7"></a><span class="co">#&gt; [1] 1676.722</span></span>
<span id="cb29-8"><a href="#cb29-8"></a><span class="co">#&gt; </span></span>
<span id="cb29-9"><a href="#cb29-9"></a><span class="co">#&gt; $Pmax_rel</span></span>
<span id="cb29-10"><a href="#cb29-10"></a><span class="co">#&gt; [1] 22.3563</span></span>
<span id="cb29-11"><a href="#cb29-11"></a><span class="co">#&gt; </span></span>
<span id="cb29-12"><a href="#cb29-12"></a><span class="co">#&gt; $Pmax_location</span></span>
<span id="cb29-13"><a href="#cb29-13"></a><span class="co">#&gt; [1] 1649.136</span></span></code></pre></div>
<p>As can be checked, this <span class="math inline">\(P_{max}\)</span> and <span class="math inline">\(P_{max}\)</span> estiamated using <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> (using simple linear regression) is not that different.</p>
<p>According to Maximum Dynamic Output Hypothesis, this peak in mean power (i.e. <span class="math inline">\(P_{max}\)</span>) happens at one’s own bodyweight<span class="citation">(Jaric and Markovic <a href="#ref-jaricLegMusclesDesign2009" role="doc-biblioref">2009</a>)</span>:</p>
<blockquote>
<p>Specifically, here we show that the optimal load for the power and momentum production in vertical jumping in habitually active individuals (but not in strength/power-trained athletes) could be the subject’s own body.</p>
</blockquote>
<p>But as can be seen, this is not the case in <code>vjsim</code> simulation. I personally see Power as <em>instrumentalist</em>, not <em>realist</em>. In other words, it is just a mathematics not some magical latent property of the Force Generator.</p>
</div>
<div id="using-peak-rather-than-mean-values" class="section level2">
<h2 class="hasAnchor">
<a href="#using-peak-rather-than-mean-values" class="anchor"></a>Using Peak rather than Mean values</h2>
<p>For far we have used mean force and mean velocity, as well as mean power. We can instead use peak values instead. Here is a profile between peak GRF and peak velocity<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"peak_GRF"</span>, <span class="st">"peak_velocity"</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-30-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>We can also extract <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> from this relationship (using simple linear regression model):</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_FV_profile.html">get_FV_profile</a></span>(</span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="dt">profile_data =</span> profile_data,</span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="dt">force =</span> <span class="st">"peak_GRF"</span>,</span>
<span id="cb31-4"><a href="#cb31-4"></a>  <span class="dt">velocity =</span> <span class="st">"peak_velocity"</span></span>
<span id="cb31-5"><a href="#cb31-5"></a>)</span>
<span id="cb31-6"><a href="#cb31-6"></a><span class="co">#&gt; $F0</span></span>
<span id="cb31-7"><a href="#cb31-7"></a><span class="co">#&gt; [1] 3113.143</span></span>
<span id="cb31-8"><a href="#cb31-8"></a><span class="co">#&gt; </span></span>
<span id="cb31-9"><a href="#cb31-9"></a><span class="co">#&gt; $F0_rel</span></span>
<span id="cb31-10"><a href="#cb31-10"></a><span class="co">#&gt; [1] 41.50857</span></span>
<span id="cb31-11"><a href="#cb31-11"></a><span class="co">#&gt; </span></span>
<span id="cb31-12"><a href="#cb31-12"></a><span class="co">#&gt; $V0</span></span>
<span id="cb31-13"><a href="#cb31-13"></a><span class="co">#&gt; [1] 6.457276</span></span>
<span id="cb31-14"><a href="#cb31-14"></a><span class="co">#&gt; </span></span>
<span id="cb31-15"><a href="#cb31-15"></a><span class="co">#&gt; $Pmax</span></span>
<span id="cb31-16"><a href="#cb31-16"></a><span class="co">#&gt; [1] 5025.605</span></span>
<span id="cb31-17"><a href="#cb31-17"></a><span class="co">#&gt; </span></span>
<span id="cb31-18"><a href="#cb31-18"></a><span class="co">#&gt; $Pmax_rel</span></span>
<span id="cb31-19"><a href="#cb31-19"></a><span class="co">#&gt; [1] 67.00807</span></span>
<span id="cb31-20"><a href="#cb31-20"></a><span class="co">#&gt; </span></span>
<span id="cb31-21"><a href="#cb31-21"></a><span class="co">#&gt; $Sfv</span></span>
<span id="cb31-22"><a href="#cb31-22"></a><span class="co">#&gt; [1] -482.1139</span></span></code></pre></div>
<p>Let’s check the peak power profile:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="kw">plot_profile</span>(profile_data, <span class="st">"peak_GRF"</span>, <span class="st">"peak_power"</span>)</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-32-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>And if we want to extract the peak value (i.e. peak value of the peak power):</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_power_profile.html">get_power_profile</a></span>(</span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="dt">profile_data =</span> profile_data,</span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="dt">x_var =</span> <span class="st">"peak_GRF"</span>,</span>
<span id="cb33-4"><a href="#cb33-4"></a>  <span class="dt">power =</span> <span class="st">"peak_power"</span></span>
<span id="cb33-5"><a href="#cb33-5"></a>)</span>
<span id="cb33-6"><a href="#cb33-6"></a><span class="co">#&gt; $Pmax</span></span>
<span id="cb33-7"><a href="#cb33-7"></a><span class="co">#&gt; [1] 3027.243</span></span>
<span id="cb33-8"><a href="#cb33-8"></a><span class="co">#&gt; </span></span>
<span id="cb33-9"><a href="#cb33-9"></a><span class="co">#&gt; $Pmax_rel</span></span>
<span id="cb33-10"><a href="#cb33-10"></a><span class="co">#&gt; [1] 40.36324</span></span>
<span id="cb33-11"><a href="#cb33-11"></a><span class="co">#&gt; </span></span>
<span id="cb33-12"><a href="#cb33-12"></a><span class="co">#&gt; $Pmax_location</span></span>
<span id="cb33-13"><a href="#cb33-13"></a><span class="co">#&gt; [1] 2074.24</span></span></code></pre></div>
<p>There are numerous profiles that could be created in <code>vjsim</code> (and with real data). Function <code><a href="../reference/get_all_profiles.html">vjsim::get_all_profiles</a></code> runs the most common profiles and returns their results (in a list and a data frame):</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>all_profiles &lt;-<span class="st"> </span>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/get_all_profiles.html">get_all_profiles</a></span>(</span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="dt">profile_data =</span> profile_data</span>
<span id="cb34-3"><a href="#cb34-3"></a>)</span>
<span id="cb34-4"><a href="#cb34-4"></a></span>
<span id="cb34-5"><a href="#cb34-5"></a><span class="kw"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(all_profiles<span class="op">$</span>data_frame, <span class="dt">rownames =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></span>
<span id="cb34-6"><a href="#cb34-6"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html">formatRound</a></span>(<span class="dt">columns =</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span>(all_profiles<span class="op">$</span>data_frame), <span class="dt">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<div id="htmlwidget-e8d4da5c33f08b4b42a6" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e8d4da5c33f08b4b42a6">{"x":{"filter":"none","data":[["Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Force ~ Mean Velocity Profile","Mean Power ~ Mean Force Profile","Mean Power ~ Mean Force Profile","Mean Power ~ Mean Force Profile","Mean Power ~ Mean Force Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Force ~ Peak Velocity Profile","Peak Power ~ Peak Force Profile","Peak Power ~ Peak Force Profile","Peak Power ~ Peak Force Profile","Peak Power ~ Peak Force Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Load ~ Take-off Velocity Profile","Impulse ~ Load Profile","Impulse ~ Load Profile","Impulse ~ Load Profile","Impulse ~ Load Profile"],["F0","F0_rel","V0","Pmax","Pmax_rel","Sfv","Pmax","Pmax_rel","Pmax_location","F0_perc","F0","F0_rel","V0","Pmax","Pmax_rel","Sfv","Pmax","Pmax_rel","Pmax_location","F0_perc","V0","L0","L0_rel","Imax","Imax_rel","Slv","Imax","Imax_rel","Imax_location","L0_perc"],[3254.31395034112,43.3908526712149,2.02110478027624,1644.32737038852,21.9243649385136,-1610.16587665303,1676.72224764211,22.3562966352282,1649.13563486021,0.506753699865788,3113.14264951829,41.5085686602438,6.45727591445923,5025.60526225255,67.0080701633673,-482.113927104662,3027.24336546154,40.3632448728206,2074.23996885707,0.666284909616341,3.47157281446385,265.147072494855,3.5352942999314,230.119342176954,3.06825789569272,-76.3766415585912,227.46033193384,3.03280442578453,135.328323927466,0.510389659045138]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>profile<\/th>\n      <th>metric<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nDTWidget.formatRound(this, row, data, 0, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 1, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 2, 2, 3, \",\", \".\");\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<div id="probing-profiles" class="section level1">
<h1 class="hasAnchor">
<a href="#probing-profiles" class="anchor"></a>Probing profiles</h1>
<p>As explained in the previous vignettes, probing means checking for sensitivity when Force Generator characteristics change. This implies changing one characteristic, while keeping all the others the same, and repeating this process for all other characteristics (or parameters). In the previous vignette we have probed how Force Generator characteristics affect single bodyweight jump performance, but now we are interested to see how profile characteristics are affected.</p>
<p>To do probing we can use <code><a href="../reference/probe_profile.html">vjsim::probe_profile</a></code> function. Let’s probe the mass~take-off velocity profile:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>probe_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/probe_profile.html">probe_profile</a></span>(</span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="dt">mass =</span> <span class="dv">75</span>,</span>
<span id="cb35-3"><a href="#cb35-3"></a>  <span class="dt">max_force =</span> <span class="dv">3000</span>,</span>
<span id="cb35-4"><a href="#cb35-4"></a>  <span class="dt">max_velocity =</span> <span class="dv">4</span>,</span>
<span id="cb35-5"><a href="#cb35-5"></a>  <span class="dt">time_to_max_activation =</span> <span class="fl">0.3</span>,</span>
<span id="cb35-6"><a href="#cb35-6"></a>  <span class="dt">time_step =</span> <span class="fl">0.001</span>,</span>
<span id="cb35-7"><a href="#cb35-7"></a>  <span class="dt">external_load =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">100</span>),</span>
<span id="cb35-8"><a href="#cb35-8"></a>  <span class="dt">change_ratio =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0.9</span>, <span class="fl">1.1</span>, <span class="dt">length.out =</span> <span class="dv">3</span>),</span>
<span id="cb35-9"><a href="#cb35-9"></a></span>
<span id="cb35-10"><a href="#cb35-10"></a>  <span class="co"># Profile variables</span></span>
<span id="cb35-11"><a href="#cb35-11"></a>  <span class="dt">profile_func =</span> <span class="cf">function</span>(...) {</span>
<span id="cb35-12"><a href="#cb35-12"></a>    <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">list =</span> <span class="kw"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(</span>
<span id="cb35-13"><a href="#cb35-13"></a>      ...,</span>
<span id="cb35-14"><a href="#cb35-14"></a>      <span class="dt">force =</span> <span class="st">"mass"</span>,</span>
<span id="cb35-15"><a href="#cb35-15"></a>      <span class="dt">velocity =</span> <span class="st">"take_off_velocity"</span></span>
<span id="cb35-16"><a href="#cb35-16"></a>    ))</span>
<span id="cb35-17"><a href="#cb35-17"></a>  },</span>
<span id="cb35-18"><a href="#cb35-18"></a>  <span class="dt">aggregate =</span> <span class="st">"ratio"</span></span>
<span id="cb35-19"><a href="#cb35-19"></a>)</span>
<span id="cb35-20"><a href="#cb35-20"></a></span>
<span id="cb35-21"><a href="#cb35-21"></a><span class="kw"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(probe_data, <span class="dt">rownames =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></span>
<span id="cb35-22"><a href="#cb35-22"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html">formatRound</a></span>(<span class="dt">columns =</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span>(probe_data), <span class="dt">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<div id="htmlwidget-f6984ef77f3716edbb69" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-f6984ef77f3716edbb69">{"x":{"filter":"none","data":[[0.9,1,1.1,0.9,1,1.1,0.9,1,1.1,0.9,1,1.1,0.9,1,1.1],["mass","mass","mass","push_off_distance","push_off_distance","push_off_distance","max_force","max_force","max_force","max_velocity","max_velocity","max_velocity","time_to_max_activation","time_to_max_activation","time_to_max_activation"],[67.5,75,82.5,75,75,75,75,75,75,75,75,75,75,75,75],[0.4,0.4,0.4,0.36,0.4,0.44,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4],[3000,3000,3000,3000,3000,3000,2700,3000,3300,3000,3000,3000,3000,3000,3000],[4,4,4,4,4,4,4,4,4,3.6,4,4.4,4,4,4],[0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.3,0.27,0.3,0.33],[0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001,0.001],[0.986101636243979,1,1.01157384719942,1.00785929086448,1,0.99506371183346,0.916246021474274,1,1.07786049267005,0.998735818840154,1,0.998819968799178,1.00048237818976,1,0.999766425952152],[1.09566848471553,1,0.919612588363109,1.00785929086448,1,0.99506371183346,0.916246021474274,1,1.07786049267005,0.998735818840154,1,0.998819968799178,1.00048237818976,1,0.999766425952152],[1.01173055186903,1,0.987603085171017,0.976156974113761,1,1.01588348416791,0.98302692839071,1,1.01486084690217,0.93473837274409,1,1.05629529150752,0.999983191709034,1,0.999580961478844],[0.997669152636074,1,0.999033452372462,0.983828875702709,1,1.01086879054643,0.900694512140064,1,1.09387841243352,0.933556694103881,1,1.05504883010626,1.00046556179084,1,0.99934748530752],[1.10852128070675,1,0.908212229429511,0.983828875702709,1,1.01086879054643,0.900694512140064,1,1.09387841243352,0.933556694103881,1,1.05504883010626,1.00046556179084,1,0.99934748530752],[0.974668239900728,1,1.02427165567658,1.0324766585615,1,0.979505747795968,0.932066045204111,1,1.06207712708612,1.06846562413843,1,0.945587826462509,1.00049919487134,1,1.00018554222265]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>change_ratio<\/th>\n      <th>probing<\/th>\n      <th>mass<\/th>\n      <th>push_off_distance<\/th>\n      <th>max_force<\/th>\n      <th>max_velocity<\/th>\n      <th>time_to_max_activation<\/th>\n      <th>time_step<\/th>\n      <th>F0<\/th>\n      <th>F0_rel<\/th>\n      <th>V0<\/th>\n      <th>Pmax<\/th>\n      <th>Pmax_rel<\/th>\n      <th>Sfv<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5,6,7,8,9,10,11,12,13]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nDTWidget.formatRound(this, row, data, 0, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 1, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 2, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 3, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 4, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 5, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 6, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 7, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 8, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 9, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 10, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 11, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 12, 2, 3, \",\", \".\");\nDTWidget.formatRound(this, row, data, 13, 2, 3, \",\", \".\");\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script><p>Plotting the probing data will convey more information. To avoid repeating the same code, let’s write a plotting function.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="co"># Need this package to label the lines</span></span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="co"># install.packages("directlabels")</span></span>
<span id="cb36-3"><a href="#cb36-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(directlabels) </span>
<span id="cb36-4"><a href="#cb36-4"></a></span>
<span id="cb36-5"><a href="#cb36-5"></a>plot_probe &lt;-<span class="st"> </span><span class="cf">function</span>(probing_data) {</span>
<span id="cb36-6"><a href="#cb36-6"></a>  <span class="co"># Convert to long</span></span>
<span id="cb36-7"><a href="#cb36-7"></a>  probe_data &lt;-<span class="st"> </span><span class="kw">gather</span>(probe_data, <span class="dt">key =</span> <span class="st">"variable"</span>, <span class="dt">value =</span> <span class="st">"value"</span>, <span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>))</span>
<span id="cb36-8"><a href="#cb36-8"></a>  </span>
<span id="cb36-9"><a href="#cb36-9"></a>  gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(probe_data,</span>
<span id="cb36-10"><a href="#cb36-10"></a>    <span class="kw">aes</span>(<span class="dt">x =</span> change_ratio, <span class="dt">y =</span> value, <span class="dt">color =</span> probing)</span>
<span id="cb36-11"><a href="#cb36-11"></a>    ) <span class="op">+</span></span>
<span id="cb36-12"><a href="#cb36-12"></a><span class="st">   </span><span class="kw"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="dv">6</span>) <span class="op">+</span></span>
<span id="cb36-13"><a href="#cb36-13"></a><span class="st">   </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb36-14"><a href="#cb36-14"></a><span class="st">   </span><span class="kw">facet_wrap</span>(<span class="op">~</span>variable, <span class="dt">scales =</span> <span class="st">"free_y"</span>) <span class="op">+</span></span>
<span id="cb36-15"><a href="#cb36-15"></a><span class="st">   </span><span class="kw">xlab</span>(<span class="st">"Normalized parameter change"</span>) <span class="op">+</span></span>
<span id="cb36-16"><a href="#cb36-16"></a><span class="st">   </span><span class="kw">ylab</span>(<span class="st">"Normalized profile change"</span>) <span class="op">+</span></span>
<span id="cb36-17"><a href="#cb36-17"></a><span class="st">   </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</span>
<span id="cb36-18"><a href="#cb36-18"></a>     <span class="st">"mass"</span> =<span class="st"> "#4D4D4D"</span>,</span>
<span id="cb36-19"><a href="#cb36-19"></a>     <span class="st">"max_force"</span> =<span class="st"> "#5DA5DA"</span>,</span>
<span id="cb36-20"><a href="#cb36-20"></a>     <span class="st">"max_velocity"</span> =<span class="st">  "#FAA43A"</span>,</span>
<span id="cb36-21"><a href="#cb36-21"></a>     <span class="st">"push_off_distance"</span> =<span class="st"> "#60BD68"</span>,</span>
<span id="cb36-22"><a href="#cb36-22"></a>     <span class="st">"time_to_max_activation"</span> =<span class="st"> "#B276B2"</span>)) <span class="op">+</span></span>
<span id="cb36-23"><a href="#cb36-23"></a><span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1.2</span>)) </span>
<span id="cb36-24"><a href="#cb36-24"></a>    </span>
<span id="cb36-25"><a href="#cb36-25"></a>  fgen_facets &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/directlabels/man/direct.label.html">direct.label</a></span>(gg, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"last.bumpup"</span>, <span class="dt">cex =</span> <span class="fl">0.4</span>))</span>
<span id="cb36-26"><a href="#cb36-26"></a>  </span>
<span id="cb36-27"><a href="#cb36-27"></a>  gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(probe_data,</span>
<span id="cb36-28"><a href="#cb36-28"></a>  <span class="kw">aes</span>(<span class="dt">x =</span> change_ratio, <span class="dt">y =</span> value, <span class="dt">color =</span> variable)) <span class="op">+</span></span>
<span id="cb36-29"><a href="#cb36-29"></a><span class="st">   </span><span class="kw"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="dv">8</span>) <span class="op">+</span></span>
<span id="cb36-30"><a href="#cb36-30"></a><span class="st">   </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb36-31"><a href="#cb36-31"></a><span class="st">   </span><span class="kw">facet_wrap</span>(<span class="op">~</span>probing, <span class="dt">scales =</span> <span class="st">"free_y"</span>) <span class="op">+</span></span>
<span id="cb36-32"><a href="#cb36-32"></a><span class="st">   </span><span class="kw">xlab</span>(<span class="st">"Normalized parameter change"</span>) <span class="op">+</span></span>
<span id="cb36-33"><a href="#cb36-33"></a><span class="st">   </span><span class="kw">ylab</span>(<span class="st">"Normalized profile change"</span>) <span class="op">+</span></span>
<span id="cb36-34"><a href="#cb36-34"></a><span class="st">   </span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1.2</span>))</span>
<span id="cb36-35"><a href="#cb36-35"></a>  </span>
<span id="cb36-36"><a href="#cb36-36"></a>  profile_facets &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/directlabels/man/direct.label.html">direct.label</a></span>(gg, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"last.bumpup"</span>, <span class="dt">cex =</span> <span class="fl">0.4</span>))</span>
<span id="cb36-37"><a href="#cb36-37"></a>  </span>
<span id="cb36-38"><a href="#cb36-38"></a>  </span>
<span id="cb36-39"><a href="#cb36-39"></a>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb36-40"><a href="#cb36-40"></a>    <span class="dt">fgen_facets =</span> fgen_facets,</span>
<span id="cb36-41"><a href="#cb36-41"></a>    <span class="dt">profile_facets =</span> profile_facets)</span>
<span id="cb36-42"><a href="#cb36-42"></a>  )</span>
<span id="cb36-43"><a href="#cb36-43"></a>}</span></code></pre></div>
<p>Now we can finally plot the probing for mass~take-off velocity profile. The output of the function has two figures - one uses profile metrics for facets, and the other uses Force Generator characteristics for facets. The information in both graphs is the same, it is just organized differently to answer different questions.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="kw">plot_probe</span>(probe_data)</span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="co">#&gt; $fgen_facets</span></span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-37-1.png" width="90%" style="display: block; margin: auto;"></p>
<pre><code>#&gt; 
#&gt; $profile_facets</code></pre>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-37-2.png" width="90%" style="display: block; margin: auto;"></p>
<p>As can be seen from the figures Force Generator max force seems to affect both <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span>, while max velocity only affects the <span class="math inline">\(V_0\)</span> in the mass~take-off velocity profile.</p>
<p>The next profile we can probe is the mean force~mean velocity profile:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>probe_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/probe_profile.html">probe_profile</a></span>(</span>
<span id="cb39-2"><a href="#cb39-2"></a>  <span class="dt">mass =</span> <span class="dv">75</span>,</span>
<span id="cb39-3"><a href="#cb39-3"></a>  <span class="dt">max_force =</span> <span class="dv">3000</span>,</span>
<span id="cb39-4"><a href="#cb39-4"></a>  <span class="dt">max_velocity =</span> <span class="dv">4</span>,</span>
<span id="cb39-5"><a href="#cb39-5"></a>  <span class="dt">time_to_max_activation =</span> <span class="fl">0.3</span>,</span>
<span id="cb39-6"><a href="#cb39-6"></a>  <span class="dt">time_step =</span> <span class="fl">0.001</span>,</span>
<span id="cb39-7"><a href="#cb39-7"></a>  <span class="dt">external_load =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">100</span>),</span>
<span id="cb39-8"><a href="#cb39-8"></a>  <span class="dt">change_ratio =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0.9</span>, <span class="fl">1.1</span>, <span class="dt">length.out =</span> <span class="dv">3</span>),</span>
<span id="cb39-9"><a href="#cb39-9"></a></span>
<span id="cb39-10"><a href="#cb39-10"></a>  <span class="co"># Profile variables</span></span>
<span id="cb39-11"><a href="#cb39-11"></a>  <span class="dt">profile_func =</span> <span class="cf">function</span>(...) {</span>
<span id="cb39-12"><a href="#cb39-12"></a>    <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">list =</span> <span class="kw"><a href="../reference/get_FV_profile.html">get_FV_profile</a></span>(</span>
<span id="cb39-13"><a href="#cb39-13"></a>      ...,</span>
<span id="cb39-14"><a href="#cb39-14"></a>      <span class="dt">force =</span> <span class="st">"mean_GRF_over_distance"</span>,</span>
<span id="cb39-15"><a href="#cb39-15"></a>      <span class="dt">velocity =</span> <span class="st">"mean_velocity"</span></span>
<span id="cb39-16"><a href="#cb39-16"></a>    ))</span>
<span id="cb39-17"><a href="#cb39-17"></a>  },</span>
<span id="cb39-18"><a href="#cb39-18"></a>  <span class="dt">aggregate =</span> <span class="st">"ratio"</span></span>
<span id="cb39-19"><a href="#cb39-19"></a>)</span>
<span id="cb39-20"><a href="#cb39-20"></a></span>
<span id="cb39-21"><a href="#cb39-21"></a><span class="kw">plot_probe</span>(probe_data)</span>
<span id="cb39-22"><a href="#cb39-22"></a><span class="co">#&gt; $fgen_facets</span></span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-38-1.png" width="90%" style="display: block; margin: auto;"></p>
<pre><code>#&gt; 
#&gt; $profile_facets</code></pre>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-38-2.png" width="90%" style="display: block; margin: auto;"></p>
<p>As can be seen from the figures Force Generator max force seems to affect both <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> (negativelly, actually), while max velocity only affects the <span class="math inline">\(V_0\)</span> in the mass~take-off velocity profile. Let’s plot these profile changes to inspect why this happens:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>profile_data_original &lt;-<span class="st"> </span>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/vj_profile.html">vj_profile</a></span>(</span>
<span id="cb41-2"><a href="#cb41-2"></a>  <span class="dt">external_load =</span> external_load,</span>
<span id="cb41-3"><a href="#cb41-3"></a></span>
<span id="cb41-4"><a href="#cb41-4"></a>  <span class="co"># Simulation parameters</span></span>
<span id="cb41-5"><a href="#cb41-5"></a>  <span class="dt">mass =</span> <span class="dv">75</span>,</span>
<span id="cb41-6"><a href="#cb41-6"></a>  <span class="dt">push_off_distance =</span> <span class="fl">0.4</span>,</span>
<span id="cb41-7"><a href="#cb41-7"></a>  <span class="dt">max_force =</span> <span class="dv">3000</span>,</span>
<span id="cb41-8"><a href="#cb41-8"></a>  <span class="dt">max_velocity =</span> <span class="dv">4</span></span>
<span id="cb41-9"><a href="#cb41-9"></a></span>
<span id="cb41-10"><a href="#cb41-10"></a>  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span></span>
<span id="cb41-11"><a href="#cb41-11"></a>  <span class="co"># weight = mass * gravity_const,</span></span>
<span id="cb41-12"><a href="#cb41-12"></a>  <span class="co"># gravity_const = 9.81,</span></span>
<span id="cb41-13"><a href="#cb41-13"></a>  <span class="co"># decline_rate = 1.05,</span></span>
<span id="cb41-14"><a href="#cb41-14"></a>  <span class="co"># peak_location = -push_off_distance * 0.15,</span></span>
<span id="cb41-15"><a href="#cb41-15"></a>  <span class="co"># time_to_max_activation = 0.3</span></span>
<span id="cb41-16"><a href="#cb41-16"></a>)</span>
<span id="cb41-17"><a href="#cb41-17"></a></span>
<span id="cb41-18"><a href="#cb41-18"></a>profile_data_velocity &lt;-<span class="st"> </span>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/vj_profile.html">vj_profile</a></span>(</span>
<span id="cb41-19"><a href="#cb41-19"></a>  <span class="dt">external_load =</span> external_load,</span>
<span id="cb41-20"><a href="#cb41-20"></a></span>
<span id="cb41-21"><a href="#cb41-21"></a>  <span class="co"># Simulation parameters</span></span>
<span id="cb41-22"><a href="#cb41-22"></a>  <span class="dt">mass =</span> <span class="dv">75</span>,</span>
<span id="cb41-23"><a href="#cb41-23"></a>  <span class="dt">push_off_distance =</span> <span class="fl">0.4</span>,</span>
<span id="cb41-24"><a href="#cb41-24"></a>  <span class="dt">max_force =</span> <span class="dv">3000</span>,</span>
<span id="cb41-25"><a href="#cb41-25"></a>  <span class="dt">max_velocity =</span> <span class="dv">4</span> <span class="op">*</span><span class="st"> </span><span class="fl">1.1</span>,</span>
<span id="cb41-26"><a href="#cb41-26"></a></span>
<span id="cb41-27"><a href="#cb41-27"></a>  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span></span>
<span id="cb41-28"><a href="#cb41-28"></a>  <span class="co"># weight = mass * gravity_const,</span></span>
<span id="cb41-29"><a href="#cb41-29"></a>  <span class="co"># gravity_const = 9.81,</span></span>
<span id="cb41-30"><a href="#cb41-30"></a>  <span class="co"># decline_rate = 1.05,</span></span>
<span id="cb41-31"><a href="#cb41-31"></a>  <span class="co"># peak_location = -push_off_distance * 0.15,</span></span>
<span id="cb41-32"><a href="#cb41-32"></a>  <span class="co"># time_to_max_activation = 0.3</span></span>
<span id="cb41-33"><a href="#cb41-33"></a>)</span>
<span id="cb41-34"><a href="#cb41-34"></a></span>
<span id="cb41-35"><a href="#cb41-35"></a>profile_data_force &lt;-<span class="st"> </span>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/vj_profile.html">vj_profile</a></span>(</span>
<span id="cb41-36"><a href="#cb41-36"></a>  <span class="dt">external_load =</span> external_load,</span>
<span id="cb41-37"><a href="#cb41-37"></a></span>
<span id="cb41-38"><a href="#cb41-38"></a>  <span class="co"># Simulation parameters</span></span>
<span id="cb41-39"><a href="#cb41-39"></a>  <span class="dt">mass =</span> <span class="dv">75</span>,</span>
<span id="cb41-40"><a href="#cb41-40"></a>  <span class="dt">push_off_distance =</span> <span class="fl">0.4</span>,</span>
<span id="cb41-41"><a href="#cb41-41"></a>  <span class="dt">max_force =</span> <span class="dv">3000</span> <span class="op">*</span><span class="st"> </span><span class="fl">1.1</span>, </span>
<span id="cb41-42"><a href="#cb41-42"></a>  <span class="dt">max_velocity =</span> <span class="dv">4</span></span>
<span id="cb41-43"><a href="#cb41-43"></a></span>
<span id="cb41-44"><a href="#cb41-44"></a>  <span class="co"># Other parameters are default in the `vjsim::fgen_get_output`</span></span>
<span id="cb41-45"><a href="#cb41-45"></a>  <span class="co"># weight = mass * gravity_const,</span></span>
<span id="cb41-46"><a href="#cb41-46"></a>  <span class="co"># gravity_const = 9.81,</span></span>
<span id="cb41-47"><a href="#cb41-47"></a>  <span class="co"># decline_rate = 1.05,</span></span>
<span id="cb41-48"><a href="#cb41-48"></a>  <span class="co"># peak_location = -push_off_distance * 0.15,</span></span>
<span id="cb41-49"><a href="#cb41-49"></a>  <span class="co"># time_to_max_activation = 0.3</span></span>
<span id="cb41-50"><a href="#cb41-50"></a>)</span>
<span id="cb41-51"><a href="#cb41-51"></a></span>
<span id="cb41-52"><a href="#cb41-52"></a>x_var &lt;-<span class="st"> "mean_GRF_over_distance"</span></span>
<span id="cb41-53"><a href="#cb41-53"></a>y_var &lt;-<span class="st"> "mean_velocity"</span></span>
<span id="cb41-54"><a href="#cb41-54"></a></span>
<span id="cb41-55"><a href="#cb41-55"></a>profile_probe_data &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(</span>
<span id="cb41-56"><a href="#cb41-56"></a>  <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(</span>
<span id="cb41-57"><a href="#cb41-57"></a>    <span class="dt">profile =</span> <span class="st">"original"</span>,</span>
<span id="cb41-58"><a href="#cb41-58"></a>    <span class="dt">force =</span> profile_data_original[[x_var]],</span>
<span id="cb41-59"><a href="#cb41-59"></a>    <span class="dt">velocity =</span> profile_data_original[[y_var]]</span>
<span id="cb41-60"><a href="#cb41-60"></a>    ),</span>
<span id="cb41-61"><a href="#cb41-61"></a>  </span>
<span id="cb41-62"><a href="#cb41-62"></a>    <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(</span>
<span id="cb41-63"><a href="#cb41-63"></a>    <span class="dt">profile =</span> <span class="st">"velocity"</span>,</span>
<span id="cb41-64"><a href="#cb41-64"></a>    <span class="dt">force =</span> profile_data_velocity[[x_var]],</span>
<span id="cb41-65"><a href="#cb41-65"></a>    <span class="dt">velocity =</span> profile_data_velocity[[y_var]]</span>
<span id="cb41-66"><a href="#cb41-66"></a>    ),</span>
<span id="cb41-67"><a href="#cb41-67"></a>  </span>
<span id="cb41-68"><a href="#cb41-68"></a>    <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(</span>
<span id="cb41-69"><a href="#cb41-69"></a>    <span class="dt">profile =</span> <span class="st">"force"</span>,</span>
<span id="cb41-70"><a href="#cb41-70"></a>    <span class="dt">force =</span> profile_data_force[[x_var]],</span>
<span id="cb41-71"><a href="#cb41-71"></a>    <span class="dt">velocity =</span> profile_data_force[[y_var]]</span>
<span id="cb41-72"><a href="#cb41-72"></a>    )</span>
<span id="cb41-73"><a href="#cb41-73"></a>)</span>
<span id="cb41-74"><a href="#cb41-74"></a></span>
<span id="cb41-75"><a href="#cb41-75"></a>gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(profile_probe_data, <span class="kw">aes</span>(<span class="dt">x =</span> force, <span class="dt">y =</span> velocity, <span class="dt">color =</span> profile)) <span class="op">+</span></span>
<span id="cb41-76"><a href="#cb41-76"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="dv">8</span>) <span class="op">+</span></span>
<span id="cb41-77"><a href="#cb41-77"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></span>
<span id="cb41-78"><a href="#cb41-78"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.8</span>)</span>
<span id="cb41-79"><a href="#cb41-79"></a>gg</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-39-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>Red line represents <em>original</em> F-V profile; green line represents F-V profile with 10% improvement in Force Generator max velocity parameter, and blue line represents F-V profile with 10% improvement in Force Generator max force parameter. If we extend this profile using simple linear regression, we get the following:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(profile_probe_data, <span class="kw">aes</span>(<span class="dt">x =</span> force, <span class="dt">y =</span> velocity, <span class="dt">color =</span> profile)) <span class="op">+</span></span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="dv">8</span>) <span class="op">+</span></span>
<span id="cb42-3"><a href="#cb42-3"></a><span class="st">  </span><span class="co">#geom_line(alpha = 0.8) +</span></span>
<span id="cb42-4"><a href="#cb42-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></span>
<span id="cb42-5"><a href="#cb42-5"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> lm, <span class="dt">se=</span><span class="ot">FALSE</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">fullrange=</span><span class="ot">TRUE</span>, <span class="dt">size =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>) <span class="op">+</span></span>
<span id="cb42-6"><a href="#cb42-6"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">3800</span>) <span class="op">+</span></span>
<span id="cb42-7"><a href="#cb42-7"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb42-8"><a href="#cb42-8"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb42-9"><a href="#cb42-9"></a>gg</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-40-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>It does seem that increasing max force decreseas <span class="math inline">\(V_0\)</span> as predicted by the <code><a href="../reference/probe_profile.html">vjsim::probe_profile</a></code> function. Even if we check the previou graph (without the extrapolation), increasing max force does increase mean velocity in the profiling range, but due to the change in slope, this results in lower <span class="math inline">\(V_0\)</span>. This represents an <em>artefact</em> that we need to be vary off when profiling and extrapolating beyond our data.</p>
<p>To finish with the probing, let’s plot mass~take-off velocity profile using this very same technique:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>x_var &lt;-<span class="st"> "mass"</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>y_var &lt;-<span class="st"> "take_off_velocity"</span></span>
<span id="cb43-3"><a href="#cb43-3"></a></span>
<span id="cb43-4"><a href="#cb43-4"></a>profile_probe_data &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(</span>
<span id="cb43-5"><a href="#cb43-5"></a>  <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(</span>
<span id="cb43-6"><a href="#cb43-6"></a>    <span class="dt">profile =</span> <span class="st">"original"</span>,</span>
<span id="cb43-7"><a href="#cb43-7"></a>    <span class="dt">force =</span> profile_data_original[[x_var]],</span>
<span id="cb43-8"><a href="#cb43-8"></a>    <span class="dt">velocity =</span> profile_data_original[[y_var]]</span>
<span id="cb43-9"><a href="#cb43-9"></a>    ),</span>
<span id="cb43-10"><a href="#cb43-10"></a>  </span>
<span id="cb43-11"><a href="#cb43-11"></a>    <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(</span>
<span id="cb43-12"><a href="#cb43-12"></a>    <span class="dt">profile =</span> <span class="st">"velocity"</span>,</span>
<span id="cb43-13"><a href="#cb43-13"></a>    <span class="dt">force =</span> profile_data_velocity[[x_var]],</span>
<span id="cb43-14"><a href="#cb43-14"></a>    <span class="dt">velocity =</span> profile_data_velocity[[y_var]]</span>
<span id="cb43-15"><a href="#cb43-15"></a>    ),</span>
<span id="cb43-16"><a href="#cb43-16"></a>  </span>
<span id="cb43-17"><a href="#cb43-17"></a>    <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(</span>
<span id="cb43-18"><a href="#cb43-18"></a>    <span class="dt">profile =</span> <span class="st">"force"</span>,</span>
<span id="cb43-19"><a href="#cb43-19"></a>    <span class="dt">force =</span> profile_data_force[[x_var]],</span>
<span id="cb43-20"><a href="#cb43-20"></a>    <span class="dt">velocity =</span> profile_data_force[[y_var]]</span>
<span id="cb43-21"><a href="#cb43-21"></a>    )</span>
<span id="cb43-22"><a href="#cb43-22"></a>)</span>
<span id="cb43-23"><a href="#cb43-23"></a></span>
<span id="cb43-24"><a href="#cb43-24"></a>gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(profile_probe_data, <span class="kw">aes</span>(<span class="dt">x =</span> force, <span class="dt">y =</span> velocity, <span class="dt">color =</span> profile)) <span class="op">+</span></span>
<span id="cb43-25"><a href="#cb43-25"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="dv">8</span>) <span class="op">+</span></span>
<span id="cb43-26"><a href="#cb43-26"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></span>
<span id="cb43-27"><a href="#cb43-27"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.8</span>)</span>
<span id="cb43-28"><a href="#cb43-28"></a>gg</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-41-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>And not extrapolate further out to check for <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span>:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(profile_probe_data, <span class="kw">aes</span>(<span class="dt">x =</span> force, <span class="dt">y =</span> velocity, <span class="dt">color =</span> profile)) <span class="op">+</span></span>
<span id="cb44-2"><a href="#cb44-2"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/cowplot/man/theme_cowplot.html">theme_cowplot</a></span>(<span class="dv">8</span>) <span class="op">+</span></span>
<span id="cb44-3"><a href="#cb44-3"></a><span class="st">  </span><span class="co">#geom_line(alpha = 0.8) +</span></span>
<span id="cb44-4"><a href="#cb44-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></span>
<span id="cb44-5"><a href="#cb44-5"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> lm, <span class="dt">se=</span><span class="ot">FALSE</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">fullrange=</span><span class="ot">TRUE</span>, <span class="dt">size =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">"dashed"</span>) <span class="op">+</span></span>
<span id="cb44-6"><a href="#cb44-6"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.window.html">xlim</a></span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">300</span>) <span class="op">+</span></span>
<span id="cb44-7"><a href="#cb44-7"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb44-8"><a href="#cb44-8"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"grey"</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb44-9"><a href="#cb44-9"></a>gg</span></code></pre></div>
<p><img src="profiling-vjsim_files/figure-html/unnamed-chunk-42-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>There are few take-off point from this little exercse: manifested <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> does not recover Force Generator characteristics and increasing Force Generator characteristic (particularly max force and max velocity) yields improvements in the jump performance across external load; BUT due to the change in slope, extrapolation to <span class="math inline">\(F_0\)</span> and <span class="math inline">\(V_0\)</span> (i.e., beyond used external load and our data) can tell us opposite story. Be vary of this.</p>
</div>
<div id="shiny-app" class="section level1">
<h1 class="hasAnchor">
<a href="#shiny-app" class="anchor"></a>Shiny App</h1>
<p>Now start playing with the code or with the <a href="https://athletess.shinyapps.io/shiny-simulator/">Shiny App</a> by click on the previous link or by running the following code:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>vjsim<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vjsim/man/run_simulator.html">run_simulator</a></span>()</span></code></pre></div>
<p>The <a href="https://athletess.shinyapps.io/shiny-simulator/">Shiny App</a> will allow you much more interactive environment for exploring the <code>vjsim</code>.</p>
</div>
<div id="want-to-learn-more" class="section level1">
<h1 class="hasAnchor">
<a href="#want-to-learn-more" class="anchor"></a>Want to learn more?</h1>
<p>Please continue by reading “Optimization in <code>vjsim</code>” (<a href="https://mladenjovanovic.github.io/vjsim/articles/optimization-vjsim.html">LINK</a>) vignette:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="kw"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span>(<span class="st">"optimization-vjsim"</span>)</span></code></pre></div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references hanging-indent">
<div id="ref-jaricLegMusclesDesign2009">
<p>Jaric, Slobodan, and Goran Markovic. 2009. “Leg Muscles Design: The Maximum Dynamic Output Hypothesis.” <em>Medicine &amp; Science in Sports &amp; Exercise</em> 41 (4): 780–87. <a href="https://doi.org/10.1249/MSS.0b013e31818f2bfa">https://doi.org/10.1249/MSS.0b013e31818f2bfa</a>.</p>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Removing weight is a bit trickier to be performed in real life settings, but in simulation it is no brainer. In real life, the weight is reduced by using some type of elastic resistance that pulls upward. Unfortunatelly, this only reduces bodyweight (i.e. force), but does not reduce mass or inertial.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>As explained in the previous vignettes, there is a difference in calculating mean GRF over time and over distance, since former uses work and latter uses impulse. You can check that by running <code>plot_profile(profile_data, "mean_GRF_over_distance", "mean_GRF_over_time") + geom_abline(slope = 1, linetype = "dashed")</code><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>Please note that the peak velocity tends to be slightly higher than the take-off velocity, since there is some decceleration happening right before the take-off (see Simulation vignette for more info)<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#profiling">Profiling</a>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#loadheight-and-loadtov-profile">Load~Height and Load~TOV Profile</a></li>
      <li><a href="#mean-forcemean-velocity-profile">Mean Force~Mean Velocity Profile</a></li>
      <li><a href="#mean-forcemean-power-profile">Mean Force~Mean Power Profile</a></li>
      <li><a href="#using-peak-rather-than-mean-values">Using Peak rather than Mean values</a></li>
      </ul>
</li>
      <li><a href="#probing-profiles">Probing profiles</a></li>
      <li><a href="#shiny-app">Shiny App</a></li>
      <li><a href="#want-to-learn-more">Want to learn more?</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mladen Jovanović.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
